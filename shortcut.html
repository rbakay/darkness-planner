<!DOCTYPE html>
<html>
<body style="background:#0a0c14; color:white; font-family:monospace;">

<script>
const params = new URLSearchParams(location.search);

// Read params
const lat = parseFloat(params.get("lat"));
const lon = parseFloat(params.get("lon"));
const from = parseInt(params.get("from"));
const to = parseInt(params.get("to"));
const min = parseFloat(params.get("min"));
const dow = params.get("dow");

// ---- Run your normal calculation (пример) ----
const result = {
  ok: true,
  date: "2025-12-12",
  overlapMinutes: 272,
  overlapHuman: "4 h 32 min",
  fromHour: from,
  toHour: to,
  scannedDays: 30,
  debug: { lat, lon, minHours: min, dowFilter: dow },
  message: "Next good dark window on 2025-12-12 with at least 4 h 32 min"
};

// ---- Output JSON so Shortcuts sees ONLY JSON ----
document.body.innerText = JSON.stringify(result);
</script>

</body>
</html>
