<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Darkness Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Status / system colors for PWA -->
  <meta name="theme-color" content="#050814">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.webmanifest" />

  
  <!-- App icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="dark-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="dark-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="dark-16.png">
  <link rel="manifest" href="manifest.webmanifest">

  <!-- Styles -->
  <link rel="stylesheet" href="dark.css" />

  <!-- StarJS (local file) -->
  <script src="StarJs.min.js"></script>

  <!-- SunCalc ‚Äì used for Moon phase and illumination -->
  <script src="https://unpkg.com/suncalc@1.9.0/suncalc.js"></script>

  <!-- Language packs -->
  <script src="lang-en.js"></script>
  <script src="lang-ru.js"></script>

  <!-- Main application logic -->
  <script defer src="dark.js"></script>
</head>
<body>
  <div class="layout">
    <!-- SETTINGS (COLLAPSIBLE) -->
    <div class="card settings-card collapsed" id="settingsCard">
      <div class="settings-header">
        <div class="settings-title-block">
          <div class="settings-title-main" id="i_appTitle">Darkness Planner</div>
          <div class="settings-title-sub" id="i_appSubtitle"></div>
        </div>
        <div class="menu-icon" id="menuIcon">
          <div class="menu-icon-inner">
            <div class="menu-icon-line"></div>
            <div class="menu-icon-line"></div>
            <div class="menu-icon-line"></div>
          </div>
        </div>
      </div>
      <div class="settings-body">
        <div class="subtitle" id="i_topHint"></div>

        <!-- Coordinates + date -->
        <div class="controls">
          <div class="field">
            <label for="lat" id="i_labelLat"></label>
            <input id="lat" type="number" step="0.0001" value="35.2271">
          </div>
          <div class="field">
            <label for="lon" id="i_labelLon"></label>
            <input id="lon" type="number" step="0.0001" value="-80.8431">
          </div>
          <div class="field">
            <label for="startDate" id="i_labelStartDate"></label>
            <input id="startDate" type="date">
          </div>
        </div>

        <!-- Buttons row (same IDs, just moved under date) -->
        <div class="button-row">
          <button id="btnGeo" type="button"></button>
          <button id="btnCalc" type="button"></button>
        </div>

        <!-- Time/date format + language -->
        <div class="controls">
          <div class="field">
            <label id="i_labelTimeFormat"></label>
            <div class="toggle-line">
              <input id="time24" type="checkbox" checked>
              <span id="i_timeFormatHint"></span>
            </div>
          </div>
          <div class="field">
            <label for="dateFormat" id="i_labelDateFormat"></label>
            <select id="dateFormat">
              <option value="DMY" selected>DD.MM.YYYY</option>
              <option value="DMY2">DD.MM.YY</option>
              <option value="MDY">MM/DD/YYYY</option>
              <option value="YMD">YYYY-MM-DD</option>
            </select>
          </div>
          <div class="field">
            <label for="langSelect" id="i_labelLanguage"></label>
            <select id="langSelect">
              <option value="en" selected>English</option>
              <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            </select>
          </div>
        </div>

        <!-- Time filter and weekday filter -->
        <div class="subtitle" style="margin-top: 4px;" id="i_filterSubtitle"></div>

        <div class="controls">
          <div class="field">
            <label for="filterFromHour" id="i_labelFilterFrom"></label>
            <select id="filterFromHour"></select>
          </div>
          <div class="field">
            <label for="filterToHour" id="i_labelFilterTo"></label>
            <select id="filterToHour"></select>
          </div>
          <div class="field">
            <label for="filterDuration" id="i_labelFilterDuration"></label>
            <input id="filterDuration" type="number" min="0" step="0.5" value="0">
          </div>
          <div class="field">
            <label for="dowFilter" id="i_labelDowFilter"></label>
            <select id="dowFilter">
              <option value="" id="i_dowEmpty"></option>
              <option value="fri_sat" id="i_dowFriSat"></option>
              <option value="fri_sat_sun" id="i_dowFriSatSun"></option>
              <option value="sat_sun" id="i_dowSatSun"></option>
            </select>
          </div>
          <div class="field">
            <label id="i_labelDisplayOptions"></label>
            <div class="toggle-line">
              <input id="filterHide" type="checkbox">
              <span id="i_filterHideLabel"></span>
            </div>
            <div class="toggle-line">
              <input id="filterHighlight" type="checkbox" checked>
              <span id="i_filterHighlightLabel"></span>
            </div>
          </div>
        </div>

        <div class="muted" id="i_filterHint"></div>
      </div>
    </div>

    <!-- SELECTED NIGHT -->
    <div class="card">
      <h2 id="nightTitle">Night</h2>

      <!-- Full darkness block -->
      <div class="block" style="margin-bottom: 8px;">
        <div class="block-title">
          <span class="block-title-emoji">üåë</span>
          <span id="i_blockDarkTitle"></span>
        </div>
        <div class="mono" id="darknessInfo">‚Äî</div>
        <div class="muted" id="darknessNote" style="margin-top: 4px;"></div>
        <div class="muted" id="filterInfo" style="margin-top: 4px;"></div>
      </div>

      <!-- Sun / Moon / Phase -->
      <div class="row">
        <div class="block">
          <div class="block-title">
            <span class="block-title-emoji">‚òÄÔ∏è</span>
            <span id="i_blockSunTitle"></span>
          </div>
          <ul class="list mono" id="sunInfo"></ul>
        </div>
        <div class="block">
          <div class="block-title">
            <span class="block-title-emoji">üåô</span>
            <span id="i_blockMoonTitle"></span>
          </div>
          <ul class="list mono" id="moonInfo"></ul>
        </div>
        <div class="block">
          <div class="block-title">
            <span class="block-title-emoji">üåì</span>
            <span id="i_blockPhaseTitle"></span>
          </div>
          <div class="mono" id="moonPhase">‚Äî</div>
        </div>
      </div>
    </div>

    <!-- NEXT 30 NIGHTS -->
    <div class="card">
      <h2 id="i_futureTitle"></h2>
      <table class="future-table">
        <colgroup>
          <col>
          <col>
          <col>
        </colgroup>
        <thead>
          <tr>
            <th id="i_thNight"></th>
            <th id="i_thDarkness"></th>
            <th id="i_thTotal"></th>
          </tr>
        </thead>
        <tbody id="futureTableBody"></tbody>
      </table>
      <div class="muted" style="margin-top: 6px;" id="i_nightLegend"></div>
    </div>

    <!-- FOOTER / VERSION -->
    <div class="footer" id="versionLabel">
      Darkness Planner ¬∑ v1.3
      <br>
    </div>
  </div>
</body>
</html>
